/*! For license information please see 105.54373ecb3cfdf8a907fa.js.LICENSE.txt */
"use strict";(self.webpackChunkauth=self.webpackChunkauth||[]).push([[105],{67:(e,t,s)=>{s.d(t,{q:()=>i});var r=s(85),a=s(390);var n=s(469);const o=()=>{const[e,t]=(0,a.useState)({type:"register"});return(0,n.useLocation)().pathname.endsWith("/verify"),(0,r.jsx)("div",{children:(0,r.jsx)(n.Outlet,{})})},i=()=>(0,r.jsx)("div",{className:"SOg41ljj",children:(0,r.jsx)(o,{})})},85:(e,t,s)=>{e.exports=s(335)},199:(e,t,s)=>{s.d(t,{A:()=>i});var r=s(85),a=s(390);var n=s(469),o=s(594);const i=()=>{const[e,t]=(0,a.useState)(!1),s=(0,n.useNavigate)();return(0,r.jsxs)("button",{className:"D7mRU7sd",onClick:()=>{return e=void 0,r=void 0,n=function*(){t(!0),yield new Promise((e=>setTimeout(e,2e3))),localStorage.setItem("user",JSON.stringify({name:"Сергій Google",email:"serhii@gmail.com",avatar:"https://i.pravatar.cc/150?u=google",provider:"google"})),s(`/${o.F}/shop`)},new((a=void 0)||(a=Promise))((function(t,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof a?s:new a((function(e){e(s)}))).then(o,i)}c((n=n.apply(e,r||[])).next())}));var e,r,a,n},disabled:e,children:[(0,r.jsx)("span",{className:"N2oFa9Qw",children:(0,r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/480px-Google_%22G%22_logo.svg.png",alt:"Google logo"})}),e?"Завантаження...":"Продовжити з Google"]})}},330:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(85);s(390);const a=({type:e,placeholder:t,label:s,min:a,max:n,id:o,required:i,onInput:c})=>{const l={type:e,className:"mJ7TjZ0Y",id:o,placeholder:t,min:a,max:n,required:i};return"password"===e&&(l.minLength=8,l.title="Пароль повинен містити щонайменше 8 символів"),"email"===e&&(l.pattern="[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}"),(0,r.jsxs)("div",{className:"Sgj9lMxY",children:[(0,r.jsx)("label",{className:"LbkLIEaX",htmlFor:o,children:s}),(0,r.jsx)("input",Object.assign({},l,{onInput:e=>{c(e.currentTarget.value)}}))]})}},335:(e,t,s)=>{var r=s(390),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var r,n={},l=null,u=null;for(r in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:u,props:n,_owner:i.current}}t.Fragment=n,t.jsx=l,t.jsxs=l},345:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(85);s(390);const a=({text:e,onClick:t})=>(0,r.jsx)("button",{type:"submit",className:"iHQwJsNU",onClick:t,children:e})},362:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(85);s(390);const a=()=>(0,r.jsx)("div",{className:"x_11IAzc",children:"АБО"})},379:(e,t,s)=>{s.d(t,{A:()=>u});var r=s(85),a=s(390),n=s(469);const o={codeInputContainer:"ChbATTJh",codeInput:"QCnkxqSu"};var i=s(877),c=s(345),l=s(594);const u=({length:e=6,disabled:t=!1,autoFocus:s=!0,className:u=""})=>{var d,m;const[p,f]=(0,a.useState)(Array(e).fill("")),[g,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)(""),j=(0,a.useRef)([]),y=(0,n.useNavigate)(),A=(0,n.useLocation)(),b=(null===(d=A.state)||void 0===d||d.email,(null===(m=A.state)||void 0===m?void 0:m.event)||""),{response:w,error:S,fetchData:N,isLoading:k}=(0,i.s)();(0,a.useEffect)((()=>{j.current=j.current.slice(0,e),s&&j.current[0]&&j.current[0].focus()}),[e,s]),(0,a.useEffect)((()=>{w&&(w.success?y(`/${l.F}/login`):(h(!0),x(w.message||"Невірний код")))}),[w]),(0,a.useEffect)((()=>{S&&(h(!0),x(S.message||"Помилка верифікації"))}),[S]);const C=t=>{var s;t.preventDefault();const r=t.clipboardData.getData("text/plain").replace(/\D/g,"").slice(0,e);if(!r)return;const a=[...p];r.split("").forEach(((t,s)=>{s<e&&(a[s]=t)})),f(a);const n=a.findIndex((e=>!e));null===(s=j.current[-1===n?e-1:n])||void 0===s||s.focus()};return(0,a.useEffect)((()=>{w&&!0===w.success?y("register"===b?`/${l.F}/login`:`/${l.F}/shop`,{state:{userData:w}}):w&&!1===w.success&&(h(!0),x(w.message||"Невірний код"))}),[w]),(0,r.jsxs)("form",{className:`${o.codeInputContainer} ${u}`,onSubmit:t=>{t.preventDefault();const s=p.join("");if(s.length!==e)return h(!0),void x("Введіть повний код");N({method:"POST",port:4004,url:"register"===b?"register/confirm":"login/confirm",body:{code:s}})},children:[Array.from({length:e},((s,a)=>(0,r.jsx)("input",{ref:e=>j.current[a]=e,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:1,value:p[a]||"",onChange:t=>((t,s)=>{var r;if(!/^\d*$/.test(s))return;const a=[...p];a[t]=s.slice(-1),f(a),s&&t<e-1&&(null===(r=j.current[t+1])||void 0===r||r.focus())})(a,t.target.value),onKeyDown:t=>((t,s)=>{var r,a,n;const o=[...p];"Backspace"===s.key?!p[t]&&t>0?(o[t-1]="",f(o),null===(r=j.current[t-1])||void 0===r||r.focus()):(o[t]="",f(o)):"ArrowLeft"===s.key&&t>0?null===(a=j.current[t-1])||void 0===a||a.focus():"ArrowRight"===s.key&&t<e-1&&(null===(n=j.current[t+1])||void 0===n||n.focus())})(a,t),onPaste:0===a?C:void 0,onFocus:e=>e.target.select(),disabled:t,"aria-label":`Digit ${a+1} of verification code`,className:o.codeInput,autoComplete:"one-time-code"},a))),(0,r.jsx)(c.A,{text:k?"Зачекайте...":"Відправити"}),g&&(0,r.jsx)("div",{className:o.error,children:v})]})}},518:(e,t,s)=>{s.d(t,{A:()=>h});var r=s(85),a=s(390),n=s(594),o=s(469),i=s(877),c=s(652),l=s(330),u=s(810),d=s(199),m=s(362),p=s(838),f=s(968),g=s(345);const h=()=>{const[e,t]=(0,a.useState)(!1),[s,h]=(0,a.useState)(""),[v,x]=(0,a.useState)({name:"",email:"",password:""}),[j,y]=(0,a.useState)(!1),A=(0,o.useNavigate)(),{response:b,error:w,fetchData:S,isLoading:N}=(0,i.s)(),k=(e,s)=>{x((t=>Object.assign(Object.assign({},t),{[e]:s}))),t(!1),console.log(v)};return(0,a.useEffect)((()=>{j&&(console.log("Відправлено   ",v),S({method:"POST",port:4004,url:"register/init",body:{name:v.name,email:v.email,password:v.password}}))}),[j]),(0,a.useEffect)((()=>{b&&(b.success?(A(`/${n.F}/verify`,{state:{email:v.email,event:"register"}}),y(!1)):(h(b.message||"Помилка реєстрації"),t(!0),y(!1)))}),[b]),(0,a.useEffect)((()=>{w&&(h(w.message||"Сталася помилка при реєстрації"),t(!0),y(!1))}),[w]),(0,r.jsxs)("form",{className:c.A.formContainer,onSubmit:e=>{e.preventDefault();const t=e.currentTarget;t.checkValidity()?y(!0):t.reportValidity()},children:[(0,r.jsx)(d.A,{}),(0,r.jsx)(m.A,{}),(0,r.jsxs)("div",{className:c.A.form,children:[(0,r.jsx)(l.A,{type:"text",id:"name",placeholder:"Введіть ваше ім'я",label:"Ім'я",required:!0,name:"name",onInput:e=>k("name",e)}),(0,r.jsx)(l.A,{type:"email",id:"email",placeholder:"your@email.com",label:"Електронна пошта",required:!0,name:"email",onInput:e=>k("email",e)}),(0,r.jsx)(l.A,{type:"password",id:"password",placeholder:"Не менше 8 символів",label:"Пароль",required:!0,name:"password",onInput:e=>k("password",e)}),(0,r.jsx)(p.A,{}),(0,r.jsx)(g.A,{text:N?"Зачекайте...":"Зареєструватися"}),e&&(0,r.jsx)(u.A,{massage:s})]}),(0,r.jsx)(f.A,{type:"register",onClick:()=>A(`/${n.F}/login`)})]})}},594:(e,t,s)=>{s.d(t,{F:()=>r});const r="fashion"},652:(e,t,s)=>{s.d(t,{A:()=>r});const r={formContainer:"wXS4gBiD",googleButton:"jtNaQ4Pb",googleIcon:"q3A9npCv",form:"tMNrKVIM",label:"_L22OWm3",icon:"TkoDlLtO",passwordToggle:"djqMB3W9"}},698:(e,t,s)=>{s.d(t,{A:()=>h});var r=s(85),a=s(390),n=s(594),o=s(469),i=s(652),c=s(330),l=s(810),u=s(199),d=s(362),m=s(838),p=s(968),f=s(345),g=s(877);const h=()=>{const e=(0,o.useNavigate)(),[t,s]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!1),[x,j]=(0,a.useState)(""),[y,A]=(0,a.useState)({email:"",password:""}),{response:b,error:w,isLoading:S,fetchData:N}=(0,g.s)(),k=(e,t)=>{A((s=>Object.assign(Object.assign({},s),{[e]:t}))),v(!1)},C=e=>{e.preventDefault();const t=e.currentTarget;t.checkValidity()?N({method:"POST",port:4004,url:"login/init",body:y}):t.reportValidity()};return(0,a.useEffect)((()=>{(null==b?void 0:b.success)?e(`/${n.F}/shop`,{state:{userData:b.userData}}):!1===(null==b?void 0:b.success)&&(v(!0),j(b.message||"Помилка входу"))}),[b]),(0,a.useEffect)((()=>{w&&(v(!0),j(w.message||"Помилка входу"))}),[w]),(0,a.useEffect)((()=>{b&&(b.success?(e(`/${n.F}/verify`,{state:{email:y.email,event:"login"}}),s(!1)):(j(b.message||"Помилка реєстрації"),v(!0),s(!1)))}),[b]),(0,r.jsxs)("form",{className:i.A.formContainer,onSubmit:C,children:[(0,r.jsx)(u.A,{}),(0,r.jsx)(d.A,{}),(0,r.jsxs)("div",{className:i.A.form,onSubmit:C,children:[(0,r.jsx)(c.A,{type:"email",id:"email",placeholder:"your@email.com",label:"Електронна пошта",required:!0,name:"email",onInput:e=>k("email",e)}),(0,r.jsx)(c.A,{type:"password",id:"password",placeholder:"Не менше 8 символів",label:"Пароль",required:!0,name:"password",onInput:e=>k("password",e)}),(0,r.jsx)(m.A,{}),(0,r.jsx)(f.A,{text:S?"Зачекайте...":"Увійти"}),h&&(0,r.jsx)(l.A,{massage:x})]}),(0,r.jsx)(p.A,{type:"login",onClick:()=>e(`/${n.F}/register`)})]})}},810:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(85);s(390);const a=({massage:e})=>(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"l1IHRsYU",children:e||"Непередбачувана помилка. Спробуйте ще раз!"})})},838:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(85);s(390);const a=()=>(0,r.jsxs)("div",{className:"s9rUYAMV",children:[(0,r.jsx)("input",{type:"checkbox",id:"terms",name:"terms",required:!0,className:"goteK97U"}),(0,r.jsxs)("label",{htmlFor:"terms",className:"S9pFQttD",children:["Я погоджуюсь з ",(0,r.jsx)("a",{href:"#",children:"Умовами використання"})," та ",(0,r.jsx)("a",{href:"#",children:"Політикою конфіденційності"})]})]})},877:(e,t,s)=>{s.d(t,{s:()=>n});var r=s(390),a=s(594);const n=()=>{const[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(null),[o,i]=(0,r.useState)(!1);return{response:e,error:s,isLoading:o,fetchData:(0,r.useCallback)((e=>{return s=void 0,r=void 0,c=function*(){const{method:s,port:r,url:o,body:c}=e;i(!0),n(null);try{const e={method:s,headers:{"Content-Type":"application/json"}};if("POST"===s){const t=Object.assign({},c||{});e.body=JSON.stringify(t)}const n=yield fetch(`http://localhost:${r}/${a.F}/${o}`,e),i=yield n.json();if(!n.ok)throw new Error("Сталася помилка. Скоротіть довжину тексту або спробуйте пізніше");if(i&&"object"==typeof i&&!1===i.success){const e=i.error||i.message||"Сталася помилка";throw new Error(e)}if("GET"===s&&!Array.isArray(i))throw new Error("Очікувався масив обʼєктів у відповіді GET");t(i)}catch(e){n(e),t({error:e.message})}finally{i(!1)}},new((o=void 0)||(o=Promise))((function(e,t){function a(e){try{i(c.next(e))}catch(e){t(e)}}function n(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var s;t.done?e(t.value):(s=t.value,s instanceof o?s:new o((function(e){e(s)}))).then(a,n)}i((c=c.apply(s,r||[])).next())}));var s,r,o,c}),[])}}},968:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(85);s(390);const a=({type:e,onClick:t})=>(0,r.jsx)("div",{className:"Qr96x46q",children:"register"===e?(0,r.jsxs)(r.Fragment,{children:["Вже маєте обліковий запис? ",(0,r.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),t(e)},children:"Увійти"})]}):(0,r.jsxs)(r.Fragment,{children:["Не маєте облікового запису? ",(0,r.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),t(e)},children:"Зареєструватися"})]})})}}]);
//# sourceMappingURL=105.54373ecb3cfdf8a907fa.js.map