/*! For license information please see 105.e08f06c876a2a5194f25.js.LICENSE.txt */
"use strict";(self.webpackChunkauth=self.webpackChunkauth||[]).push([[105],{31:(e,s,t)=>{t.d(s,{A:()=>c});var r=t(85),a=t(390),n=t.n(a);const o="bGjy25Fp",i="DneMcwW3",c=({text:e,onClick:s,img:t,variant:a="primary"})=>{const c="secondary"===a?`${o} W3ePZ5vR`:o;return(0,r.jsxs)("button",{className:c,onClick:s,children:[t&&"string"==typeof t?(0,r.jsx)("img",{src:t,alt:"",className:i}):t&&n().createElement(t,{className:i}),e]})}},67:(e,s,t)=>{t.d(s,{q:()=>i});var r=t(85),a=t(390);var n=t(469);const o=()=>{const[e,s]=(0,a.useState)({type:"register"});return(0,n.useLocation)().pathname.endsWith("/verify"),(0,r.jsx)("div",{children:(0,r.jsx)(n.Outlet,{})})},i=()=>(0,r.jsx)("div",{className:"SOg41ljj",children:(0,r.jsx)(o,{})})},85:(e,s,t)=>{e.exports=t(335)},199:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(85),a=t(390);var n=t(469),o=t(594);const i=()=>{const[e,s]=(0,a.useState)(!1),t=(0,n.useNavigate)();return(0,r.jsxs)("button",{className:"D7mRU7sd",onClick:()=>{return e=void 0,r=void 0,n=function*(){s(!0),yield new Promise((e=>setTimeout(e,2e3))),localStorage.setItem("user",JSON.stringify({name:"Сергій Google",email:"serhii@gmail.com",avatar:"https://i.pravatar.cc/150?u=google",provider:"google"})),t(`/${o.F}/shop`)},new((a=void 0)||(a=Promise))((function(s,t){function o(e){try{c(n.next(e))}catch(e){t(e)}}function i(e){try{c(n.throw(e))}catch(e){t(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,r||[])).next())}));var e,r,a,n},disabled:e,children:[(0,r.jsx)("span",{className:"N2oFa9Qw",children:(0,r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/480px-Google_%22G%22_logo.svg.png",alt:"Google logo"})}),e?"Завантаження...":"Продовжити з Google"]})}},330:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(85);t(390);const a=({type:e,placeholder:s,label:t,min:a,max:n,id:o,required:i,onInput:c})=>{const l={type:e,className:"mJ7TjZ0Y",id:o,placeholder:s,min:a,max:n,required:i};return"password"===e&&(l.minLength=8,l.title="Пароль повинен містити щонайменше 8 символів"),"email"===e&&(l.pattern="[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}"),(0,r.jsxs)("div",{className:"Sgj9lMxY",children:[(0,r.jsx)("label",{className:"LbkLIEaX",htmlFor:o,children:t}),(0,r.jsx)("input",Object.assign({},l,{onInput:e=>{c(e.currentTarget.value)}}))]})}},335:(e,s,t)=>{var r=t(390),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,s,t){var r,n={},l=null,u=null;for(r in void 0!==t&&(l=""+t),void 0!==s.key&&(l=""+s.key),void 0!==s.ref&&(u=s.ref),s)o.call(s,r)&&!c.hasOwnProperty(r)&&(n[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===n[r]&&(n[r]=s[r]);return{$$typeof:a,type:e,key:l,ref:u,props:n,_owner:i.current}}s.Fragment=n,s.jsx=l,s.jsxs=l},362:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(85);t(390);const a=()=>(0,r.jsx)("div",{className:"x_11IAzc",children:"АБО"})},379:(e,s,t)=>{t.d(s,{A:()=>u});var r=t(85),a=t(390),n=t(469);const o={codeInputContainer:"ChbATTJh",codeInput:"QCnkxqSu"};var i=t(877),c=t(31),l=t(594);const u=({length:e=6,disabled:s=!1,autoFocus:t=!0,className:u=""})=>{var d,m;const[p,f]=(0,a.useState)(Array(e).fill("")),[g,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)(""),j=(0,a.useRef)([]),y=(0,n.useNavigate)(),A=(0,n.useLocation)(),b=(null===(d=A.state)||void 0===d||d.email,(null===(m=A.state)||void 0===m?void 0:m.event)||""),{response:w,error:S,fetchData:N,isLoading:k}=(0,i.s)();(0,a.useEffect)((()=>{j.current=j.current.slice(0,e),t&&j.current[0]&&j.current[0].focus()}),[e,t]),(0,a.useEffect)((()=>{w&&(w.success?y(`/${l.F}/login`):(h(!0),x(w.message||"Невірний код")))}),[w]),(0,a.useEffect)((()=>{S&&(h(!0),x(S.message||"Помилка верифікації"))}),[S]);const D=s=>{var t;s.preventDefault();const r=s.clipboardData.getData("text/plain").replace(/\D/g,"").slice(0,e);if(!r)return;const a=[...p];r.split("").forEach(((s,t)=>{t<e&&(a[t]=s)})),f(a);const n=a.findIndex((e=>!e));null===(t=j.current[-1===n?e-1:n])||void 0===t||t.focus()};return(0,a.useEffect)((()=>{w&&!0===w.success?y("register"===b?`/${l.F}/login`:`/${l.F}/shop`,{state:{userData:w}}):w&&!1===w.success&&(h(!0),x(w.message||"Невірний код"))}),[w]),(0,r.jsxs)("form",{className:`${o.codeInputContainer} ${u}`,onSubmit:s=>{s.preventDefault();const t=p.join("");if(t.length!==e)return h(!0),void x("Введіть повний код");N({method:"POST",port:4004,url:"register"===b?"register/confirm":"login/confirm",body:{code:t}})},children:[Array.from({length:e},((t,a)=>(0,r.jsx)("input",{ref:e=>j.current[a]=e,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:1,value:p[a]||"",onChange:s=>((s,t)=>{var r;if(!/^\d*$/.test(t))return;const a=[...p];a[s]=t.slice(-1),f(a),t&&s<e-1&&(null===(r=j.current[s+1])||void 0===r||r.focus())})(a,s.target.value),onKeyDown:s=>((s,t)=>{var r,a,n;const o=[...p];"Backspace"===t.key?!p[s]&&s>0?(o[s-1]="",f(o),null===(r=j.current[s-1])||void 0===r||r.focus()):(o[s]="",f(o)):"ArrowLeft"===t.key&&s>0?null===(a=j.current[s-1])||void 0===a||a.focus():"ArrowRight"===t.key&&s<e-1&&(null===(n=j.current[s+1])||void 0===n||n.focus())})(a,s),onPaste:0===a?D:void 0,onFocus:e=>e.target.select(),disabled:s,"aria-label":`Digit ${a+1} of verification code`,className:o.codeInput,autoComplete:"one-time-code"},a))),(0,r.jsx)(c.A,{text:k?"Зачекайте...":"Відправити"}),g&&(0,r.jsx)("div",{className:o.error,children:v})]})}},518:(e,s,t)=>{t.d(s,{A:()=>h});var r=t(85),a=t(390),n=t(594),o=t(469),i=t(877),c=t(652),l=t(330),u=t(810),d=t(199),m=t(362),p=t(838),f=t(968),g=t(31);const h=()=>{const[e,s]=(0,a.useState)(!1),[t,h]=(0,a.useState)(""),[v,x]=(0,a.useState)({name:"",email:"",password:""}),[j,y]=(0,a.useState)(!1),A=(0,o.useNavigate)(),{response:b,error:w,fetchData:S,isLoading:N}=(0,i.s)(),k=(e,t)=>{x((s=>Object.assign(Object.assign({},s),{[e]:t}))),s(!1),console.log(v)};return(0,a.useEffect)((()=>{j&&(console.log("Відправлено   ",v),S({method:"POST",port:4004,url:"register/init",body:{name:v.name,email:v.email,password:v.password}}))}),[j]),(0,a.useEffect)((()=>{b&&(b.success?(A(`/${n.F}/verify`,{state:{email:v.email,event:"register"}}),y(!1)):(h(b.message||"Помилка реєстрації"),s(!0),y(!1)))}),[b]),(0,a.useEffect)((()=>{w&&(h(w.message||"Сталася помилка при реєстрації"),s(!0),y(!1))}),[w]),(0,r.jsxs)("form",{className:c.A.formContainer,onSubmit:e=>{e.preventDefault();const s=e.currentTarget;s.checkValidity()?y(!0):s.reportValidity()},children:[(0,r.jsx)(d.A,{}),(0,r.jsx)(m.A,{}),(0,r.jsxs)("div",{className:c.A.form,children:[(0,r.jsx)(l.A,{type:"text",id:"name",placeholder:"Введіть ваше ім'я",label:"Ім'я",required:!0,name:"name",onInput:e=>k("name",e)}),(0,r.jsx)(l.A,{type:"email",id:"email",placeholder:"your@email.com",label:"Електронна пошта",required:!0,name:"email",onInput:e=>k("email",e)}),(0,r.jsx)(l.A,{type:"password",id:"password",placeholder:"Не менше 8 символів",label:"Пароль",required:!0,name:"password",onInput:e=>k("password",e)}),(0,r.jsx)(p.A,{}),(0,r.jsx)(g.A,{text:N?"Зачекайте...":"Зареєструватися"}),e&&(0,r.jsx)(u.A,{massage:t})]}),(0,r.jsx)(f.A,{type:"register",onClick:()=>A(`/${n.F}/login`)})]})}},594:(e,s,t)=>{t.d(s,{F:()=>r});const r="fashion"},652:(e,s,t)=>{t.d(s,{A:()=>r});const r={formContainer:"wXS4gBiD",googleButton:"jtNaQ4Pb",googleIcon:"q3A9npCv",form:"tMNrKVIM",label:"_L22OWm3",icon:"TkoDlLtO",passwordToggle:"djqMB3W9"}},698:(e,s,t)=>{t.d(s,{A:()=>h});var r=t(85),a=t(390),n=t(594),o=t(469),i=t(652),c=t(330),l=t(810),u=t(199),d=t(362),m=t(838),p=t(968),f=t(31),g=t(877);const h=()=>{const e=(0,o.useNavigate)(),[s,t]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!1),[x,j]=(0,a.useState)(""),[y,A]=(0,a.useState)({email:"",password:""}),{response:b,error:w,isLoading:S,fetchData:N}=(0,g.s)(),k=(e,s)=>{A((t=>Object.assign(Object.assign({},t),{[e]:s}))),v(!1)},D=e=>{e.preventDefault();const s=e.currentTarget;s.checkValidity()?N({method:"POST",port:4004,url:"login/init",body:y}):s.reportValidity()};return(0,a.useEffect)((()=>{(null==b?void 0:b.success)?e(`/${n.F}/shop`,{state:{userData:b.userData}}):!1===(null==b?void 0:b.success)&&(v(!0),j(b.message||"Помилка входу"))}),[b]),(0,a.useEffect)((()=>{w&&(v(!0),j(w.message||"Помилка входу"))}),[w]),(0,a.useEffect)((()=>{b&&(b.success?(e(`/${n.F}/verify`,{state:{email:y.email,event:"login"}}),t(!1)):(j(b.message||"Помилка реєстрації"),v(!0),t(!1)))}),[b]),(0,r.jsxs)("form",{className:i.A.formContainer,onSubmit:D,children:[(0,r.jsx)(u.A,{}),(0,r.jsx)(d.A,{}),(0,r.jsxs)("div",{className:i.A.form,onSubmit:D,children:[(0,r.jsx)(c.A,{type:"email",id:"email",placeholder:"your@email.com",label:"Електронна пошта",required:!0,name:"email",onInput:e=>k("email",e)}),(0,r.jsx)(c.A,{type:"password",id:"password",placeholder:"Не менше 8 символів",label:"Пароль",required:!0,name:"password",onInput:e=>k("password",e)}),(0,r.jsx)(m.A,{}),(0,r.jsx)(f.A,{text:S?"Зачекайте...":"Увійти"}),h&&(0,r.jsx)(l.A,{massage:x})]}),(0,r.jsx)(p.A,{type:"login",onClick:()=>e(`/${n.F}/register`)})]})}},810:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(85);t(390);const a=({massage:e})=>(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"l1IHRsYU",children:e||"Непередбачувана помилка. Спробуйте ще раз!"})})},838:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(85);t(390);const a=()=>(0,r.jsxs)("div",{className:"s9rUYAMV",children:[(0,r.jsx)("input",{type:"checkbox",id:"terms",name:"terms",required:!0,className:"goteK97U"}),(0,r.jsxs)("label",{htmlFor:"terms",className:"S9pFQttD",children:["Я погоджуюсь з ",(0,r.jsx)("a",{href:"#",children:"Умовами використання"})," та ",(0,r.jsx)("a",{href:"#",children:"Політикою конфіденційності"})]})]})},877:(e,s,t)=>{t.d(s,{s:()=>n});var r=t(390),a=t(594);const n=()=>{const[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(null),[o,i]=(0,r.useState)(!1);return{response:e,error:t,isLoading:o,fetchData:(0,r.useCallback)((e=>{return t=void 0,r=void 0,c=function*(){const{method:t,port:r,url:o,body:c}=e;i(!0),n(null);try{const e={method:t,headers:{"Content-Type":"application/json"}};if("POST"===t){const s=Object.assign({},c||{});e.body=JSON.stringify(s)}const n=yield fetch(`http://localhost:${r}/${a.F}/${o}`,e),i=yield n.json();if(!n.ok)throw new Error("Сталася помилка. Скоротіть довжину тексту або спробуйте пізніше");if(i&&"object"==typeof i&&!1===i.success){const e=i.error||i.message||"Сталася помилка";throw new Error(e)}if("GET"===t&&!Array.isArray(i))throw new Error("Очікувався масив обʼєктів у відповіді GET");s(i)}catch(e){n(e),s({error:e.message})}finally{i(!1)}},new((o=void 0)||(o=Promise))((function(e,s){function a(e){try{i(c.next(e))}catch(e){s(e)}}function n(e){try{i(c.throw(e))}catch(e){s(e)}}function i(s){var t;s.done?e(s.value):(t=s.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,n)}i((c=c.apply(t,r||[])).next())}));var t,r,o,c}),[])}}},968:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(85);t(390);const a=({type:e,onClick:s})=>(0,r.jsx)("div",{className:"Qr96x46q",children:"register"===e?(0,r.jsxs)(r.Fragment,{children:["Вже маєте обліковий запис? ",(0,r.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),s(e)},children:"Увійти"})]}):(0,r.jsxs)(r.Fragment,{children:["Не маєте облікового запису? ",(0,r.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),s(e)},children:"Зареєструватися"})]})})}}]);
//# sourceMappingURL=105.e08f06c876a2a5194f25.js.map