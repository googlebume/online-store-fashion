/*! For license information please see 597.d39401ee8d159bcfedc9.js.LICENSE.txt */
"use strict";(self.webpackChunkauth=self.webpackChunkauth||[]).push([[597],{14:(e,t,s)=>{s.d(t,{A:()=>a});const a={white:"#fff",black:"#151a1f",yellow:"#ffbe0b",golden:"#e4ab0e",gray:"#ccc",ash:"#acacac",ashDarkened:"#788387",milkish:"#f9f9f9",whiteText:"#fff",grayText:"#ccc",ashText:"#acacac",ashDarkenedText:"#788387",formContainer:"wXS4gBiD",googleButton:"jtNaQ4Pb",googleIcon:"q3A9npCv",form:"tMNrKVIM",label:"_L22OWm3",icon:"TkoDlLtO",passwordToggle:"djqMB3W9"}},85:(e,t,s)=>{e.exports=s(335)},117:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(85),r=s(390),n=s(469);const o={white:"#fff",black:"#151a1f",yellow:"#ffbe0b",golden:"#e4ab0e",gray:"#ccc",ash:"#acacac",ashDarkened:"#788387",milkish:"#f9f9f9",whiteText:"#fff",grayText:"#ccc",ashText:"#acacac",ashDarkenedText:"#788387",codeInputContainer:"ChbATTJh",codeInput:"QCnkxqSu"};var c=s(395),i=s(922),l=s(872);const u=({length:e=6,disabled:t=!1,autoFocus:s=!0,className:u=""})=>{var d,m;const[f,p]=(0,r.useState)(Array(e).fill("")),[h,g]=(0,r.useState)(!1),[v,x]=(0,r.useState)(""),y=(0,r.useRef)([]),j=(0,n.useNavigate)(),b=(0,n.useLocation)(),w=(null===(d=b.state)||void 0===d||d.email,(null===(m=b.state)||void 0===m?void 0:m.event)||""),{response:A,error:k,fetchData:S,isLoading:N}=(0,c.s)();(0,r.useEffect)((()=>{y.current=y.current.slice(0,e),s&&y.current[0]&&y.current[0].focus()}),[e,s]),(0,r.useEffect)((()=>{A&&(A.success?j(`/${l.F}/login`):(g(!0),x(A.message||"Невірний код")))}),[A]),(0,r.useEffect)((()=>{k&&(g(!0),x(k.message||"Помилка верифікації"))}),[k]);const D=t=>{var s;t.preventDefault();const a=t.clipboardData.getData("text/plain").replace(/\D/g,"").slice(0,e);if(!a)return;const r=[...f];a.split("").forEach(((t,s)=>{s<e&&(r[s]=t)})),p(r);const n=r.findIndex((e=>!e));null===(s=y.current[-1===n?e-1:n])||void 0===s||s.focus()};return(0,r.useEffect)((()=>{A&&!0===A.success?j("register"===w?`/${l.F}/login`:`/${l.F}/shop`,{state:{userData:A}}):A&&!1===A.success&&(g(!0),x(A.message||"Невірний код"))}),[A]),(0,a.jsxs)("form",{className:`${o.codeInputContainer} ${u}`,onSubmit:t=>{t.preventDefault();const s=f.join("");if(s.length!==e)return g(!0),void x("Введіть повний код");S({method:"POST",port:4004,url:"register"===w?"register/confirm":"login/confirm",body:{code:s}})},children:[Array.from({length:e},((s,r)=>(0,a.jsx)("input",{ref:e=>y.current[r]=e,type:"text",inputMode:"numeric",pattern:"\\d*",maxLength:1,value:f[r]||"",onChange:t=>((t,s)=>{var a;if(!/^\d*$/.test(s))return;const r=[...f];r[t]=s.slice(-1),p(r),s&&t<e-1&&(null===(a=y.current[t+1])||void 0===a||a.focus())})(r,t.target.value),onKeyDown:t=>((t,s)=>{var a,r,n;const o=[...f];"Backspace"===s.key?!f[t]&&t>0?(o[t-1]="",p(o),null===(a=y.current[t-1])||void 0===a||a.focus()):(o[t]="",p(o)):"ArrowLeft"===s.key&&t>0?null===(r=y.current[t-1])||void 0===r||r.focus():"ArrowRight"===s.key&&t<e-1&&(null===(n=y.current[t+1])||void 0===n||n.focus())})(r,t),onPaste:0===r?D:void 0,onFocus:e=>e.target.select(),disabled:t,"aria-label":`Digit ${r+1} of verification code`,className:o.codeInput,autoComplete:"one-time-code"},r))),(0,a.jsx)(i.A,{text:N?"Зачекайте...":"Відправити"}),h&&(0,a.jsx)("div",{className:o.error,children:v})]})}},172:(e,t,s)=>{s.d(t,{A:()=>g});var a=s(85),r=s(390),n=s(872),o=s(469),c=s(395),i=s(14),l=s(618),u=s(902),d=s(645),m=s(197),f=s(698),p=s(358),h=s(922);const g=()=>{const[e,t]=(0,r.useState)(!1),[s,g]=(0,r.useState)(""),[v,x]=(0,r.useState)({name:"",email:"",password:""}),[y,j]=(0,r.useState)(!1),b=(0,o.useNavigate)(),{response:w,error:A,fetchData:k,isLoading:S}=(0,c.s)(),N=(e,s)=>{x((t=>Object.assign(Object.assign({},t),{[e]:s}))),t(!1),console.log(v)};return(0,r.useEffect)((()=>{y&&(console.log("Відправлено   ",v),k({method:"POST",port:4004,url:"register/init",body:{name:v.name,email:v.email,password:v.password}}))}),[y]),(0,r.useEffect)((()=>{w&&(w.success?(b(`/${n.F}/verify`,{state:{email:v.email,event:"register"}}),j(!1)):(g(w.message||"Помилка реєстрації"),t(!0),j(!1)))}),[w]),(0,r.useEffect)((()=>{A&&(g(A.message||"Сталася помилка при реєстрації"),t(!0),j(!1))}),[A]),(0,a.jsxs)("form",{className:i.A.formContainer,onSubmit:e=>{e.preventDefault();const t=e.currentTarget;t.checkValidity()?j(!0):t.reportValidity()},children:[(0,a.jsx)(d.A,{}),(0,a.jsx)(m.A,{}),(0,a.jsxs)("div",{className:i.A.form,children:[(0,a.jsx)(l.A,{type:"text",id:"name",placeholder:"Введіть ваше ім'я",label:"Ім'я",required:!0,name:"name",onInput:e=>N("name",e)}),(0,a.jsx)(l.A,{type:"email",id:"email",placeholder:"your@email.com",label:"Електронна пошта",required:!0,name:"email",onInput:e=>N("email",e)}),(0,a.jsx)(l.A,{type:"password",id:"password",placeholder:"Не менше 8 символів",label:"Пароль",required:!0,name:"password",onInput:e=>N("password",e)}),(0,a.jsx)(f.A,{}),(0,a.jsx)(h.A,{text:S?"Зачекайте...":"Зареєструватися"}),e&&(0,a.jsx)(u.A,{massage:s})]}),(0,a.jsx)(p.A,{type:"register",onClick:()=>b(`/${n.F}/login`)})]})}},197:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(85);s(390);const r=()=>(0,a.jsx)("div",{className:"x_11IAzc",children:"АБО"})},335:(e,t,s)=>{var a=s(390),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,s){var a,n={},l=null,u=null;for(a in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,a)&&!i.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:r,type:e,key:l,ref:u,props:n,_owner:c.current}}t.Fragment=n,t.jsx=l,t.jsxs=l},358:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(85);s(390);const r=({type:e,onClick:t})=>(0,a.jsx)("div",{className:"Qr96x46q",children:"register"===e?(0,a.jsxs)(a.Fragment,{children:["Вже маєте обліковий запис? ",(0,a.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),t(e)},children:"Увійти"})]}):(0,a.jsxs)(a.Fragment,{children:["Не маєте облікового запису? ",(0,a.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),t(e)},children:"Зареєструватися"})]})})},385:(e,t,s)=>{s.d(t,{q:()=>c});var a=s(85),r=s(390);var n=s(469);const o=()=>{const[e,t]=(0,r.useState)({type:"register"});return(0,n.useLocation)().pathname.endsWith("/verify"),(0,a.jsx)("div",{children:(0,a.jsx)(n.Outlet,{})})},c=()=>(0,a.jsx)("div",{className:"SOg41ljj",children:(0,a.jsx)(o,{})})},395:(e,t,s)=>{s.d(t,{s:()=>n});var a=s(390),r=s(872);const n=()=>{const[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1);return{response:e,error:s,isLoading:o,fetchData:(0,a.useCallback)((e=>{return s=void 0,a=void 0,i=function*(){const{method:s,port:a,url:o,body:i}=e;c(!0),n(null);try{const e={method:s,headers:{"Content-Type":"application/json"}};if("POST"===s){const t=Object.assign({},i||{});e.body=JSON.stringify(t)}const n=yield fetch(`http://localhost:${a}/${r.F}/${o}`,e),c=yield n.json();if(!n.ok)throw new Error("Сталася помилка. Скоротіть довжину тексту або спробуйте пізніше");if(c&&"object"==typeof c&&!1===c.success){const e=c.error||c.message||"Сталася помилка";throw new Error(e)}if("GET"===s&&!Array.isArray(c))throw new Error("Очікувався масив обʼєктів у відповіді GET");t(c)}catch(e){n(e),t({error:e.message})}finally{c(!1)}},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(i.next(e))}catch(e){t(e)}}function n(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var s;t.done?e(t.value):(s=t.value,s instanceof o?s:new o((function(e){e(s)}))).then(r,n)}c((i=i.apply(s,a||[])).next())}));var s,a,o,i}),[])}}},618:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(85);s(390);const r=({type:e,placeholder:t,label:s,min:r,max:n,id:o,required:c,onInput:i})=>{const l={type:e,className:"mJ7TjZ0Y",id:o,placeholder:t,min:r,max:n,required:c};return"password"===e&&(l.minLength=8,l.title="Пароль повинен містити щонайменше 8 символів"),"email"===e&&(l.pattern="[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}"),(0,a.jsxs)("div",{className:"Sgj9lMxY",children:[(0,a.jsx)("label",{className:"LbkLIEaX",htmlFor:o,children:s}),(0,a.jsx)("input",Object.assign({},l,{onInput:e=>{i(e.currentTarget.value)}}))]})}},645:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(85),r=s(390);var n=s(469),o=s(872);const c=()=>{const[e,t]=(0,r.useState)(!1),s=(0,n.useNavigate)();return(0,a.jsxs)("button",{className:"D7mRU7sd",onClick:()=>{return e=void 0,a=void 0,n=function*(){t(!0),yield new Promise((e=>setTimeout(e,2e3))),localStorage.setItem("user",JSON.stringify({name:"Сергій Google",email:"serhii@gmail.com",avatar:"https://i.pravatar.cc/150?u=google",provider:"google"})),s(`/${o.F}/shop`)},new((r=void 0)||(r=Promise))((function(t,s){function o(e){try{i(n.next(e))}catch(e){s(e)}}function c(e){try{i(n.throw(e))}catch(e){s(e)}}function i(e){var s;e.done?t(e.value):(s=e.value,s instanceof r?s:new r((function(e){e(s)}))).then(o,c)}i((n=n.apply(e,a||[])).next())}));var e,a,r,n},disabled:e,children:[(0,a.jsx)("span",{className:"N2oFa9Qw",children:(0,a.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Google_%22G%22_logo.svg/480px-Google_%22G%22_logo.svg.png",alt:"Google logo"})}),e?"Завантаження...":"Продовжити з Google"]})}},698:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(85);s(390);const r=()=>(0,a.jsxs)("div",{className:"s9rUYAMV",children:[(0,a.jsx)("input",{type:"checkbox",id:"terms",name:"terms",required:!0,className:"goteK97U"}),(0,a.jsxs)("label",{htmlFor:"terms",className:"S9pFQttD",children:["Я погоджуюсь з ",(0,a.jsx)("a",{href:"#",children:"Умовами використання"})," та ",(0,a.jsx)("a",{href:"#",children:"Політикою конфіденційності"})]})]})},720:(e,t,s)=>{s.d(t,{A:()=>g});var a=s(85),r=s(390),n=s(872),o=s(469),c=s(14),i=s(618),l=s(902),u=s(645),d=s(197),m=s(698),f=s(358),p=s(922),h=s(395);const g=()=>{const e=(0,o.useNavigate)(),[t,s]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[x,y]=(0,r.useState)(""),[j,b]=(0,r.useState)({email:"",password:""}),{response:w,error:A,isLoading:k,fetchData:S}=(0,h.s)(),N=(e,t)=>{b((s=>Object.assign(Object.assign({},s),{[e]:t}))),v(!1)},D=e=>{e.preventDefault();const t=e.currentTarget;t.checkValidity()?S({method:"POST",port:4004,url:"login/init",body:j}):t.reportValidity()};return(0,r.useEffect)((()=>{(null==w?void 0:w.success)?e(`/${n.F}/shop`,{state:{userData:w.userData}}):!1===(null==w?void 0:w.success)&&(v(!0),y(w.message||"Помилка входу"))}),[w]),(0,r.useEffect)((()=>{A&&(v(!0),y(A.message||"Помилка входу"))}),[A]),(0,r.useEffect)((()=>{w&&(w.success?(e(`/${n.F}/verify`,{state:{email:j.email,event:"login"}}),s(!1)):(y(w.message||"Помилка реєстрації"),v(!0),s(!1)))}),[w]),(0,a.jsxs)("form",{className:c.A.formContainer,onSubmit:D,children:[(0,a.jsx)(u.A,{}),(0,a.jsx)(d.A,{}),(0,a.jsxs)("div",{className:c.A.form,onSubmit:D,children:[(0,a.jsx)(i.A,{type:"email",id:"email",placeholder:"your@email.com",label:"Електронна пошта",required:!0,name:"email",onInput:e=>N("email",e)}),(0,a.jsx)(i.A,{type:"password",id:"password",placeholder:"Не менше 8 символів",label:"Пароль",required:!0,name:"password",onInput:e=>N("password",e)}),(0,a.jsx)(m.A,{}),(0,a.jsx)(p.A,{text:k?"Зачекайте...":"Увійти"}),g&&(0,a.jsx)(l.A,{massage:x})]}),(0,a.jsx)(f.A,{type:"login",onClick:()=>e(`/${n.F}/register`)})]})}},872:(e,t,s)=>{s.d(t,{F:()=>a});const a="fashion"},902:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(85);s(390);const r=({massage:e})=>(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"l1IHRsYU",children:e||"Непередбачувана помилка. Спробуйте ще раз!"})})},922:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(85),r=s(390),n=s.n(r);const o="bGjy25Fp",c="DneMcwW3",i=({text:e,onClick:t,img:s,variant:r="primary"})=>{const i="secondary"===r?`${o} W3ePZ5vR`:o;return(0,a.jsxs)("button",{className:i,onClick:t,children:[s&&"string"==typeof s?(0,a.jsx)("img",{src:s,alt:"",className:c}):s&&n().createElement(s,{className:c}),e]})}}}]);
//# sourceMappingURL=597.d39401ee8d159bcfedc9.js.map